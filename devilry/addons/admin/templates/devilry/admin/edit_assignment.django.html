{% extends "devilry/admin/base.django.html" %}
{% comment %} vim: set ts=2 sts=2 et sw=2: {% endcomment %}
{% load i18n %}
{% load rst_to_html %}

{% block title %}{% trans "Assignments" %}{% endblock %}
{% block heading %}
    {% if isnew %}{% trans "Create" %}{% else %}{% trans "Edit" %}{% endif %}
    assignment
{% endblock %}


{% block admin-breadcrumbs %}
  {{ block.super }}
  <li>
    <a href="{% url devilry-admin-list_assignments %}">
      {% trans "Administer assignments" %}</a>
  </li>
  <li class="current">
    {% if isnew %}
      <a href="#">{% trans "Create assignment" %}</a>
    {% else %}
      <a href="#">{{ assignment.get_path }}</a>
      <ul>
        <li><a href="{% url devilry-examiner-list_assignmentgroups assignment.id %}">
          {% trans "Examiner mode" %}
        </a></li>
      </ul>
    {% endif %}
  </li>
{% endblock %}

{% block main %}

{% if message %}
	<p>{{ message }}</p>
{% endif %}

<form method='post' action='
    {% if assignment.id %}
      {% url devilry-admin-edit_assignment assignment.id %}
    {% else %}
      {% url devilry-admin-create_assignment %}
    {% endif %}
    '>
  <fieldset class='stdfieldset'>
    {% include "devilry/ui/include/form-list.django.html" %}
  </fieldset>
  <div class='button-row'>
    <input type='submit' name='save' value='{% trans "Save" %}' class='button'/>
  </div>
</form>

{% if isnew %}
  <h2>Grade plugins</h2>
  {% for key, gradeplugin in gradeplugins %}
    <h3>{{ gradeplugin.label }}</h3>
    <p>{{ gradeplugin.description|rst_to_html }}</p>
  {% endfor %}
{% endif %}


{% if not isnew %}
  <h2>Groups</h2>

  {{ assignmentgroupstbl }}
{% endif %}
{% endblock %}
