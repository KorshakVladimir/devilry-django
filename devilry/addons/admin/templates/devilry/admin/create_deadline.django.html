{% extends "devilry/admin/edit_assignmentgroup_base.django.html" %}
{% comment %} vim: set ts=2 sts=2 et sw=2: {% endcomment %}
{% load i18n %}

{% block title %}
	{% trans "Create deadline" %}
{% endblock %}
{% block heading %}
	{% trans "Create deadline" %}
{% endblock %}


{% block admin-breadcrumbs %}
  {{ block.super }}
  <li class="current"><a href="#">
    {% trans "Create deadline" %}
  </a></li>
{% endblock %}

{% block main %}

{% if message %}
	<p>{{ message }}</p>
{% endif %}

<form method='post' action='{% url devilry-admin-create_deadline assignment.id %}'>
	<input type='hidden' name='onsite' value='yes'/>

	{% for group in groups %}
	  <input type='hidden' name='{{ checkbox_name }}' value='{{ group.id }}'/>
	{% endfor %}

	<h2>{% trans "Set the following deadline:" %}</h2>
	{% with deadlineform as form %}
		<fieldset class='stdfieldset'>
			{% include "devilry/ui/include/form-list.django.html" %}
		</fieldset>
	{% endwith %}

	{% if has_shared_deadlines %}
		<p>
			{% blocktrans %}
			The selected assignment groups have at least one common deadline. If you
			wish to replace one of these instead of creating a new deadline, just
			select one of the shared deadlines below.
			{% endblocktrans %}
		</p>
		{% with selectform as form %}
			<fieldset class='stdfieldset'>
				{% include "devilry/ui/include/form-list.django.html" %}
			</fieldset>
		{% endwith %}
	{% else %}
		<p>
			{% blocktrans %}
			The selected assignment groups do not have any common deadlines. To
			replace a existing deadline, select assignment groups with at least one
			deadline in common. Note that only the date and time has to match, not
			the text.
			{% endblocktrans %}
		</p>
	{% endif %}

	<h2>{% trans "... on the following groups:" %}</h2>
	<ul>
	{% for group in groups %}
	  <li>{{ group.get_students }}</li>
	{% endfor %}
	</ul>

  <div class='button-row'>
    <input type='submit' name='save' class='button' value='{% trans "Create deadline" %}'/>
  </div>
</form>
{% endblock %}
