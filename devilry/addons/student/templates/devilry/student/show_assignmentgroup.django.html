{% extends "devilry/student/base.django.html" %}
{% comment %} vim: set ts=2 sts=2 et sw=2: {% endcomment %}
{% load i18n %}


{% block breadcrumbs %}
  {{ block.super }}
  <li class="current"><a href="#">
    {{ assignment_group }}
  </a></li>
{% endblock %}

{% block belowheading %}
  {% trans "Deliveries" %}
{% endblock %}

{% block main %}
  <p>{% blocktrans %}Current deliveries, with the latest delivery first. You can
  add as many deliveries as you like.{% endblocktrans %}</p>
  {% if assignment_group.deliveries.all.count == 0 %}
    <p class="no_deliveries">{% trans "No deliveries" %}</p>
  {% else %}
    <table class='horizontal_ordered_table'>
    <tr>
      <th>Time</th>
      <th>Delivered by</th>
      <th>Status</th>
      <th>Grade</th>
      <th></th>
    </tr>
    
    {% for delivery in assignment_group.deliveries.all %}
    <tr>
      <td> {{ delivery.time_of_delivery|date:"DATETIME_FORMAT" }} </td>
      <td> {{ delivery.delivered_by }} </td>
      <td class="{{ delivery.get_status_student_cssclass }}">
        {{ delivery.get_status }}
      </td>
      <td> {% if delivery.feedback.published %}
      {{ delivery.feedback.get_grade_as_short_string }} {% endif %} 
      </td>
      <td><a href='{% url devilry-student-show-delivery delivery.id %}'>
            show
      </a></td>
    </tr>
    {% endfor %}
    </table> 
  {% endif %}

  {% if assignment_group.can_add_deliveries %}
  <p>
    <a class='button' href='{% url devilry-student-add-delivery assignment_group.id %}'>
      Add new delivery
    </a>
  </p>
  {% else %}
  <div class='info-message'>
    {% trans "This assignment is closed for more deliveries." %}
  </div>
  {% endif %}
{% endblock %}


