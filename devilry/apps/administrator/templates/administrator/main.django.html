{% extends "theme/base.django.html" %}
{% load extjs %}

{% block title %}Devilry admin interface{% endblock %}

{% block headextra %}

<link rel="stylesheet" type="text/css"
    href="{{ DEVILRY_STATIC_URL }}/administrator/main.css" />

<script>
    {{ RestfulSimplifiedNode|extjs_model }}
    var nodestore = {{ RestfulSimplifiedNode|extjs_store }}

    {{ RestfulSimplifiedSubject|extjs_model }}
    var subjectstore = {{ RestfulSimplifiedSubject|extjs_store }}

    {{ RestfulSimplifiedSubject|extjs_model }}
    var subjectstore = {{ RestfulSimplifiedSubject|extjs_store }}

    {{ RestfulSimplifiedPeriod|extjs_model:"subject" }}
    var periodstore = {{ RestfulSimplifiedPeriod|extjs_store }}

    Ext.onReady(function() {
        var nodeform = Ext.create('Ext.form.Panel', {
            renderTo: 'form-example',
            title: 'This is a shitty form',
            defaultType: 'textfield',
            {{ RestfulSimplifiedNode|extjs_forms}}
        });

        Ext.ModelManager.getModel('devilry.apps.administrator.simplified.SimplifiedNode').load(1, {
            success: function(node) {
                nodeform.loadRecord(node);
            }
        });
    });
</script>

<script src="{{ DEVILRY_STATIC_URL }}/administrator/main.js"></script>
{% endblock %}


{% block main %}
<div id='searchwidget'></div>
<div id='form-example'></div>
{% endblock %}
