

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Simplified API &mdash; Devilry v1.0 documentation</title>
    <link rel="stylesheet" href="_static/devilry.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Devilry v1.0 documentation" href="index.html" />
    <link rel="next" title="Low level RESTful web service API" href="restful.html" />
    <link rel="prev" title="How to write a plugin" href="plugins.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="restful.html" title="Low level RESTful web service API"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="plugins.html" title="How to write a plugin"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Devilry v1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="simplified-api">
<span id="simplified"></span><h1>Simplified API<a class="headerlink" href="#simplified-api" title="Permalink to this headline">¶</a></h1>
<p>This API was first introduced in this <a class="reference external" href="https://github.com/devilry/devilry-django/issues/90">github issue</a></p>
<p>The simplified API is a simple task oriented API which simplifies the most
common needs. It is a API which lends itself naturally to be exposed
as a RESTful web service API. This API is the public interface for devilry in any
language and platform:</p>
<blockquote>
<div><ul class="simple">
<li>RESTful web services</li>
<li>javascript</li>
<li>serverside python</li>
<li>client libraries using the RESTful web API.</li>
</ul>
</div></blockquote>
<p>This means that a developer who has played around with the javascript in the
Devilry templates, can use the same API if he or she wants to develop a
serverside addon or a command-line script using the official devilry python
bindings.</p>
<div class="section" id="what-is-it">
<h2>What is it?<a class="headerlink" href="#what-is-it" title="Permalink to this headline">¶</a></h2>
<p>The devilry core is very powerful and flexible. This unfortunatly makes it a
bit complex. The simplified API makes all the information provided by the core
available through a much more simple API. Instead of the recursive database
API provided by the core, developers get a API where they can say things like:</p>
<ul class="simple">
<li>give me all deliveries by this user on this assignent.</li>
<li>update the feedback on this delivery</li>
<li>get all files in this delivery</li>
<li>...</li>
</ul>
</div>
<div class="section" id="what-is-it-not">
<h2>What is it not?<a class="headerlink" href="#what-is-it-not" title="Permalink to this headline">¶</a></h2>
<p>You can access all data in the devilry core via the simplified API, but it is
limited to the most common ways of accessing this data. This means that you have
to use the core directly if you wish to make complex queries which is not needed
by a common <em>task</em>. To put it simple: It is not an API for doing things that are
not supported by the devilry web interface.</p>
</div>
<div class="section" id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<p>The code for a simplified class might look like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nd">@simplified_modelapi</span>
<span class="k">class</span> <span class="nc">Subject</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Subject</span>
        <span class="n">resultfields</span> <span class="o">=</span> <span class="n">FieldSpec</span><span class="p">(</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="s">&#39;short_name&#39;</span><span class="p">,</span> <span class="s">&#39;long_name&#39;</span><span class="p">)</span>
        <span class="n">searchfields</span> <span class="o">=</span> <span class="n">FieldSpec</span><span class="p">(</span><span class="s">&#39;short_name&#39;</span><span class="p">,</span> <span class="s">&#39;long_name&#39;</span><span class="p">)</span>
        <span class="n">methods</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;search&#39;</span><span class="p">,</span> <span class="s">&#39;read&#39;</span><span class="p">]</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">create_searchqryset</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">published_where_is_examiner</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">read_authorize</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">published_where_is_examiner</span><span class="p">(</span><span class="n">user</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">obj</span><span class="o">.</span><span class="n">id</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">PermissionDenied</span><span class="p">()</span>
</pre></div>
</div>
<p>This is the API an examiner would use to access a subject in Devilry. Every Simplified API class
has to have the fields <em>model, resultfields, searchfields</em> and <em>methods</em>. Depending on what methods you define
you will also need to implement some &#64;classmethods in your Simplified class. Lets run through the details:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>This class contains all the required fields. Lets look at what thiese fields do.</p>
<p><em>model</em> defines the database model to be used:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Subject</span>
    <span class="o">...</span>
</pre></div>
</div>
<p><em>resultfields</em> defines the fields you will get access to when you search/read from the model using this API:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
    <span class="o">...</span>
    <span class="n">resultfields</span> <span class="o">=</span> <span class="n">FieldSpec</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
    <span class="o">...</span>
</pre></div>
</div>
<p><em>searchfields</em> defines what fields in the model will be used when searching for this object:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
    <span class="o">...</span>
    <span class="n">searchfields</span> <span class="o">=</span> <span class="n">FieldSpec</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>And <em>methods</em> define what methods will be created for this class:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
    <span class="o">...</span>
    <span class="n">methods</span> <span class="o">=</span> <span class="p">[</span><span class="o">...</span><span class="p">]</span>
</pre></div>
</div>
<p>Now let look at the required methods for class Subject.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">create_searchqryset</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">published_where_is_examiner</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
</pre></div>
</div>
<p>runs a query in the database for the information <em>user</em> has access to with the parameters
given in <em>kwargs</em> and returns this queryset. This is needed for all database-lookups.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">read_authorize</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">published_where_is_examiner</span><span class="p">(</span><span class="n">user</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">obj</span><span class="o">.</span><span class="n">id</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">PermissionDenied</span><span class="p">()</span>
</pre></div>
</div>
<p>simply checkes that <em>user</em> has access to the information he/she/it tries to access. This is needed for
the <em>read</em> method we defined in <em>methods</em>.</p>
<p>Now its time to start using this API. If you look at the <em>methods</em> field you will se that the defined methods are
<em>read</em> and <em>search</em>, and if we look at the <em>searchfields</em> we can search based on <em>short_name</em> and <em>long_name</em>.
Say we have a subject with short_name = &#8216;dev10&#8217; and another subject with short_name = &#8216;dev11&#8217;. And we have a user
with username = &#8216;bob&#8217; as an examiner in both subjects.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">simplified</span> <span class="kn">import</span> <span class="n">Subject</span>

<span class="n">examinerbob</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s">&quot;bob&quot;</span><span class="p">)</span>
<span class="n">qrywrap</span> <span class="o">=</span> <span class="n">Subject</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">examinerbob</span><span class="p">,</span> <span class="n">query</span><span class="o">=</span><span class="s">&quot;dev1&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Then <em>qrywrap</em> would contain the two subjects dev10 and dev11, since both short_name&#8217;s match our query.
However, of we run:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">simplified</span> <span class="kn">import</span> <span class="n">Subject</span>

<span class="n">examinerbob</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s">&quot;bob&quot;</span><span class="p">)</span>
<span class="n">qrywrap</span> <span class="o">=</span> <span class="n">Subject</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">examinerbob</span><span class="p">,</span> <span class="n">query</span><span class="o">=</span><span class="s">&quot;10&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>our query will only match dev10, and <em>qrywrap</em> will only contain the subject dev10.</p>
</div>
<div class="section" id="public-api">
<h2>Public API<a class="headerlink" href="#public-api" title="Permalink to this headline">¶</a></h2>
<p>Every function and class in the public API is made available directly in
<tt class="docutils literal"><span class="pre">devilry.simplified.NAME</span></tt>.</p>
<span class="target" id="module-devilry.simplified"></span><dl class="exception">
<dt id="devilry.simplified.SimplifiedException">
<em class="property">exception </em><tt class="descclassname">devilry.simplified.</tt><tt class="descname">SimplifiedException</tt><a class="headerlink" href="#devilry.simplified.SimplifiedException" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">exceptions.Exception</span></tt></p>
<p>Base class for Simplified exceptions.</p>
</dd></dl>

<dl class="exception">
<dt id="devilry.simplified.PermissionDenied">
<em class="property">exception </em><tt class="descclassname">devilry.simplified.</tt><tt class="descname">PermissionDenied</tt><a class="headerlink" href="#devilry.simplified.PermissionDenied" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">devilry.simplified.exceptions.SimplifiedException</span></tt></p>
<p>Signals that a user tries to access something they are not permitted
to access.</p>
</dd></dl>

<dl class="exception">
<dt id="devilry.simplified.InvalidNumberOfResults">
<em class="property">exception </em><tt class="descclassname">devilry.simplified.</tt><tt class="descname">InvalidNumberOfResults</tt><a class="headerlink" href="#devilry.simplified.InvalidNumberOfResults" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">devilry.simplified.exceptions.SimplifiedException</span></tt></p>
<p>Raised when search() does not return <em>exactly</em> the number of results
specified in the <em>exact_number_of_results</em> parameter.</p>
</dd></dl>

<dl class="exception">
<dt id="devilry.simplified.FilterValidationError">
<em class="property">exception </em><tt class="descclassname">devilry.simplified.</tt><tt class="descname">FilterValidationError</tt><a class="headerlink" href="#devilry.simplified.FilterValidationError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">devilry.simplified.exceptions.SimplifiedException</span></tt></p>
<p>Raised when an invalid filter is given to
<a class="reference internal" href="#devilry.simplified.SimplifiedModelApi.search" title="devilry.simplified.SimplifiedModelApi.search"><tt class="xref py py-meth docutils literal"><span class="pre">devilry.simplified.SimplifiedModelApi.search()</span></tt></a>.</p>
</dd></dl>

<dl class="class">
<dt id="devilry.simplified.QryResultWrapper">
<em class="property">class </em><tt class="descclassname">devilry.simplified.</tt><tt class="descname">QryResultWrapper</tt><big>(</big><em>resultfields</em>, <em>searchfields</em>, <em>django_qryset</em><big>)</big><a class="headerlink" href="#devilry.simplified.QryResultWrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Wrapper around a django QuerySet.</p>
<dl class="attribute">
<dt id="devilry.simplified.QryResultWrapper.resultfields">
<tt class="descname">resultfields</tt><a class="headerlink" href="#devilry.simplified.QryResultWrapper.resultfields" title="Permalink to this definition">¶</a></dt>
<dd><p>The underlying django queryset provides access to far more data
than what we usually require. This list contains the fields provided
when methods in this class convert the model instances
in the wrapped django queryset into a dict.</p>
</dd></dl>

<dl class="attribute">
<dt id="devilry.simplified.QryResultWrapper.searchfields">
<tt class="descname">searchfields</tt><a class="headerlink" href="#devilry.simplified.QryResultWrapper.searchfields" title="Permalink to this definition">¶</a></dt>
<dd><p>The fields that were searched when generating this result.</p>
</dd></dl>

<dl class="attribute">
<dt id="devilry.simplified.QryResultWrapper._insecure_django_qryset">
<tt class="descname">_insecure_django_qryset</tt><a class="headerlink" href="#devilry.simplified.QryResultWrapper._insecure_django_qryset" title="Permalink to this definition">¶</a></dt>
<dd><p>The django queryset which this object wraps to provide security.
Should <strong>not</strong> be used unless the public methods of this class
fails to provide the required functionality. Any use of _insecure_django_qryset
is considered a security risc.</p>
</dd></dl>

<dl class="attribute">
<dt id="devilry.simplified.QryResultWrapper.total">
<tt class="descname">total</tt><a class="headerlink" href="#devilry.simplified.QryResultWrapper.total" title="Permalink to this definition">¶</a></dt>
<dd><p>The total number of matches before slicing (before applying start and
limit).</p>
</dd></dl>

<dl class="method">
<dt id="devilry.simplified.QryResultWrapper.count">
<tt class="descname">count</tt><big>(</big><big>)</big><a class="headerlink" href="#devilry.simplified.QryResultWrapper.count" title="Permalink to this definition">¶</a></dt>
<dd><p>Shortcut for <tt class="docutils literal"><span class="pre">_insecure_django_qryset.count()</span></tt>.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="devilry.simplified.FieldSpec">
<em class="property">class </em><tt class="descclassname">devilry.simplified.</tt><tt class="descname">FieldSpec</tt><big>(</big><em>*always_available_fields</em>, <em>**additional_fieldgroups</em><big>)</big><a class="headerlink" href="#devilry.simplified.FieldSpec" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Specifies and groups fields for search and read results.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>always_available_fields</strong> &#8211; Fields that is always available.</li>
<li><strong>additional_fieldgroups</strong> &#8211; Each key is the name of a fieldgroup, and the value is
a list/tuple/iterable of field names.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="devilry.simplified.FieldSpec.additional_aslist">
<tt class="descname">additional_aslist</tt><big>(</big><big>)</big><a class="headerlink" href="#devilry.simplified.FieldSpec.additional_aslist" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of the keys in <tt class="docutils literal"><span class="pre">additional_fieldgroups</span></tt>.</p>
</dd></dl>

<dl class="method">
<dt id="devilry.simplified.FieldSpec.all_aslist">
<tt class="descname">all_aslist</tt><big>(</big><big>)</big><a class="headerlink" href="#devilry.simplified.FieldSpec.all_aslist" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all fields in always_available_fields and in additional_fieldgroups.</p>
</dd></dl>

<dl class="method">
<dt id="devilry.simplified.FieldSpec.aslist">
<tt class="descname">aslist</tt><big>(</big><em>fieldgroups=None</em><big>)</big><a class="headerlink" href="#devilry.simplified.FieldSpec.aslist" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the fields in <tt class="docutils literal"><span class="pre">always_available_fields</span></tt> and all
fields in any of the <tt class="docutils literal"><span class="pre">fieldgroups</span></tt>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>fieldgroups</strong> &#8211; Tuple/list of fieldgroups. Fieldgroups are keys in
<tt class="docutils literal"><span class="pre">additional_fieldgroups</span></tt> (see __init__).</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="devilry.simplified.FieldSpec.iterfieldnames">
<tt class="descname">iterfieldnames</tt><big>(</big><big>)</big><a class="headerlink" href="#devilry.simplified.FieldSpec.iterfieldnames" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over all fieldnames in this FieldSpec.</p>
</dd></dl>

<dl class="method">
<dt id="devilry.simplified.FieldSpec.localfieldgroups_aslist">
<tt class="descname">localfieldgroups_aslist</tt><big>(</big><big>)</big><a class="headerlink" href="#devilry.simplified.FieldSpec.localfieldgroups_aslist" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all fieldgroups containing fields belonging to the current table.</p>
<p>Fields not belonging to the current table are any field
containing <tt class="docutils literal"><span class="pre">__</span></tt>.</p>
</dd></dl>

<dl class="method">
<dt id="devilry.simplified.FieldSpec.localfields_aslist">
<tt class="descname">localfields_aslist</tt><big>(</big><big>)</big><a class="headerlink" href="#devilry.simplified.FieldSpec.localfields_aslist" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all fields belonging to the current table.</p>
<p>Fields not belonging to the current table are any field
containing <tt class="docutils literal"><span class="pre">__</span></tt>.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="devilry.simplified.simplified_modelapi">
<tt class="descclassname">devilry.simplified.</tt><tt class="descname">simplified_modelapi</tt><big>(</big><em>cls</em><big>)</big><a class="headerlink" href="#devilry.simplified.simplified_modelapi" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator which creates a simplified API for a Django model.</p>
<p>The <tt class="docutils literal"><span class="pre">cls</span></tt> must have an inner class named <tt class="docutils literal"><span class="pre">Meta</span></tt> with
the following attributes:</p>
<blockquote>
<div><dl class="docutils">
<dt>model</dt>
<dd>Then Django model. <strong>Required</strong>.</dd>
<dt>methods</dt>
<dd><p class="first">A list of supported CRUD+S methods. <strong>Required</strong>. Legal values are:</p>
<blockquote class="last">
<div><ul class="simple">
<li>create</li>
<li>read</li>
<li>update</li>
<li>delete</li>
<li>search</li>
</ul>
</div></blockquote>
</dd>
<dt>resultfields</dt>
<dd>A <a class="reference internal" href="#devilry.simplified.FieldSpec" title="devilry.simplified.FieldSpec"><tt class="xref py py-class docutils literal"><span class="pre">FieldSpec</span></tt></a> which defines what fields to
return from <tt class="docutils literal"><span class="pre">read()</span></tt> and <tt class="docutils literal"><span class="pre">search()</span></tt>. <strong>Required</strong>.</dd>
<dt>searchfields</dt>
<dd>A <a class="reference internal" href="#devilry.simplified.FieldSpec" title="devilry.simplified.FieldSpec"><tt class="xref py py-class docutils literal"><span class="pre">FieldSpec</span></tt></a> which defines what fields to
search in <tt class="docutils literal"><span class="pre">search()</span></tt>. <strong>Required</strong>.</dd>
<dt>editablefields</dt>
<dd><p class="first">A list of fields that are editable. If this is not specified,
it defaults to <tt class="docutils literal"><span class="pre">resultfields.localfields_aslist()</span></tt> with
the primary key field removed if it is a AutoField.</p>
<p class="last">Only fields in this set may be given as <tt class="docutils literal"><span class="pre">field_values</span></tt>
to <tt class="docutils literal"><span class="pre">update()</span></tt> or <tt class="docutils literal"><span class="pre">create()</span></tt>. Furthermore, these
fields are used to generate forms in <a class="reference internal" href="restful.html#restful"><em>Low level RESTful web service API</em></a>.</p>
</dd>
<dt>editable_fieldgroups</dt>
<dd>A list of result field groups which should at least contain
all fields in <tt class="docutils literal"><span class="pre">editablefields</span></tt>. Defaults to
<tt class="docutils literal"><span class="pre">resultfields.localfieldgroups_aslist()</span></tt></dd>
<dt>filters</dt>
<dd>A <a class="reference internal" href="#devilry.simplified.FilterSpecs" title="devilry.simplified.FilterSpecs"><tt class="xref py py-class docutils literal"><span class="pre">devilry.simplified.FilterSpecs</span></tt></a> limiting the possible
filters to perform. Defaults to an empty <tt class="docutils literal"><span class="pre">FilterSpec</span></tt>.</dd>
</dl>
</div></blockquote>
<p>The <tt class="docutils literal"><span class="pre">cls</span></tt> must have the following methods for handling permissions:</p>
<blockquote>
<div><dl class="docutils">
<dt>read_authorize</dt>
<dd>Authorization method used for each call to <tt class="docutils literal"><span class="pre">read()</span></tt>.</dd>
<dt>write_authorize</dt>
<dd>Authorization method used for each call to any CRUD+S
method except for <tt class="docutils literal"><span class="pre">read()</span></tt>.</dd>
<dt>create_searchqryset</dt>
<dd>Method used to create the queryset filtered in search().
Required if <tt class="docutils literal"><span class="pre">&quot;search&quot;</span></tt> is in <tt class="docutils literal"><span class="pre">Meta.methods</span></tt>.</dd>
</dl>
</div></blockquote>
<p>The decorator adds the following attributes to <tt class="docutils literal"><span class="pre">cls</span></tt>:</p>
<blockquote>
<div><dl class="docutils">
<dt>_meta</dt>
<dd>Alias for the Meta class (above).</dd>
<dt>supports_create</dt>
<dd>Boolean variable: is <tt class="docutils literal"><span class="pre">'create'</span></tt> in <tt class="docutils literal"><span class="pre">_meta.methods</span></tt>.</dd>
<dt>supports_read</dt>
<dd>Boolean variable: is <tt class="docutils literal"><span class="pre">'read'</span></tt> in <tt class="docutils literal"><span class="pre">_meta.methods</span></tt>.</dd>
<dt>supports_update</dt>
<dd>Boolean variable: is <tt class="docutils literal"><span class="pre">'update'</span></tt> in <tt class="docutils literal"><span class="pre">_meta.methods</span></tt>.</dd>
<dt>supports_delete</dt>
<dd>Boolean variable: is <tt class="docutils literal"><span class="pre">'delete'</span></tt> in <tt class="docutils literal"><span class="pre">_meta.methods</span></tt>.</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="class">
<dt id="devilry.simplified.SimplifiedModelApi">
<em class="property">class </em><tt class="descclassname">devilry.simplified.</tt><tt class="descname">SimplifiedModelApi</tt><a class="headerlink" href="#devilry.simplified.SimplifiedModelApi" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Base class for all simplified APIs.</p>
<dl class="classmethod">
<dt id="devilry.simplified.SimplifiedModelApi.create">
<em class="property">classmethod </em><tt class="descname">create</tt><big>(</big><em>user</em>, <em>**field_values</em><big>)</big><a class="headerlink" href="#devilry.simplified.SimplifiedModelApi.create" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the given object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>user</strong> &#8211; Django user object.</td>
</tr>
<tr class="field"><th class="field-name">Field_values :</th><td class="field-body">The values to set on the given object.</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">The primary key of the newly created object.</td>
</tr>
<tr class="field"><th class="field-name" colspan="2">Throws PermissionDenied:</th></tr>
<tr><td>&nbsp;</td><td class="field-body">If the given user does not have permission to edit this object,
if the object does not exist, or if any of the <tt class="docutils literal"><span class="pre">field_values</span></tt>
is not in <tt class="docutils literal"><span class="pre">cls._meta.editablefields</span></tt>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="devilry.simplified.SimplifiedModelApi.create_searchqryset">
<em class="property">classmethod </em><tt class="descname">create_searchqryset</tt><big>(</big><em>user</em><big>)</big><a class="headerlink" href="#devilry.simplified.SimplifiedModelApi.create_searchqryset" title="Permalink to this definition">¶</a></dt>
<dd><p>Create search queryset.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">A Django QuerySet.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="devilry.simplified.SimplifiedModelApi.delete">
<em class="property">classmethod </em><tt class="descname">delete</tt><big>(</big><em>user</em>, <em>pk</em><big>)</big><a class="headerlink" href="#devilry.simplified.SimplifiedModelApi.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete the given object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>user</strong> &#8211; Django user object.</li>
<li><strong>pk</strong> &#8211; Id of object or kwargs to the get method of the configured model.</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The primary key of the deleted object.</p>
</td>
</tr>
<tr class="field"><th class="field-name" colspan="2">Throws PermissionDenied:</th></tr>
<tr><td>&nbsp;</td><td class="field-body"><p class="first last">If the given user does not have permission to delete this object,
if the object does not exist, or if the user does not have permission
to recursively delete this objects and all its children.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="devilry.simplified.SimplifiedModelApi.handle_fieldgroups">
<em class="property">classmethod </em><tt class="descname">handle_fieldgroups</tt><big>(</big><em>user</em>, <em>result_fieldgroups</em>, <em>search_fieldgroups</em>, <em>filters</em><big>)</big><a class="headerlink" href="#devilry.simplified.SimplifiedModelApi.handle_fieldgroups" title="Permalink to this definition">¶</a></dt>
<dd><p>Can be overridden to change fieldgroups before they are sent into the
QryResultWrapper. For example, if certain fieldgroups contain
senstive data for anonymous assignments, we can add those fieldgroups
if a filter for a specific assignment is provided in <tt class="docutils literal"><span class="pre">filters</span></tt> and
that assignment is not anonymous.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">(result_fieldgroups, search_fieldgroups)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="devilry.simplified.SimplifiedModelApi.is_empty">
<em class="property">classmethod </em><tt class="descname">is_empty</tt><big>(</big><em>obj</em><big>)</big><a class="headerlink" href="#devilry.simplified.SimplifiedModelApi.is_empty" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the given obj is empty. Defaults to returning <tt class="xref docutils literal"><span class="pre">False</span></tt>.</p>
<p>Can be implemented in subclasses to enable superadmins to recursively delete the <tt class="docutils literal"><span class="pre">obj</span></tt>.</p>
</dd></dl>

<dl class="classmethod">
<dt id="devilry.simplified.SimplifiedModelApi.read">
<em class="property">classmethod </em><tt class="descname">read</tt><big>(</big><em>user</em>, <em>pk</em>, <em>result_fieldgroups=</em><span class="optional">[</span><span class="optional">]</span><big>)</big><a class="headerlink" href="#devilry.simplified.SimplifiedModelApi.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the requested item and return a dict with the fields specified
in <tt class="docutils literal"><span class="pre">Meta.resultfields</span></tt> and additional fields specified in
<tt class="docutils literal"><span class="pre">result_fieldgroups</span></tt>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>user</strong> &#8211; Django user object.</li>
<li><strong>pk</strong> &#8211; Id of object or kwargs to the get method of the configured model.</li>
<li><strong>result_fieldgroups</strong> &#8211; Fieldgroups from the additional_fieldgroups specified in
<tt class="docutils literal"><span class="pre">result_fieldgroups</span></tt>.</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name" colspan="2">Throws PermissionDenied:</th></tr>
<tr><td>&nbsp;</td><td class="field-body"><p class="first last">If the given user does not have permission to view this object, or
if the object does not exist.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="devilry.simplified.SimplifiedModelApi.read_authorize">
<em class="property">classmethod </em><tt class="descname">read_authorize</tt><big>(</big><em>user</em>, <em>obj</em><big>)</big><a class="headerlink" href="#devilry.simplified.SimplifiedModelApi.read_authorize" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the given user has read permission on the given obj.</p>
<p>Defaults to <tt class="docutils literal"><span class="pre">cls.write_authorize(user,</span> <span class="pre">obj)</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name" colspan="2">Raises PermissionDenied:</th></tr>
<tr><td>&nbsp;</td><td class="field-body">If the given user do not have read permission on the given obj.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="devilry.simplified.SimplifiedModelApi.search">
<em class="property">classmethod </em><tt class="descname">search</tt><big>(</big><em>user</em>, <em>query=''</em>, <em>start=0</em>, <em>limit=50</em>, <em>orderby=None</em>, <em>result_fieldgroups=None</em>, <em>search_fieldgroups=None</em>, <em>filters={}</em>, <em>exact_number_of_results=None</em><big>)</big><a class="headerlink" href="#devilry.simplified.SimplifiedModelApi.search" title="Permalink to this definition">¶</a></dt>
<dd><p>Search for objects.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>query</strong> &#8211; A string to search for within the model specified in
<tt class="docutils literal"><span class="pre">Meta.model</span></tt>. The fields to search for is specified in
<tt class="docutils literal"><span class="pre">Meta.search_fieldgroups</span></tt>.</li>
<li><strong>start</strong> &#8211; Return results from this index in the results from the given
<tt class="docutils literal"><span class="pre">query</span></tt>. Defaults to <tt class="docutils literal"><span class="pre">0</span></tt>.</li>
<li><strong>limit</strong> &#8211; Limit results to this number of items. Defaults to <tt class="docutils literal"><span class="pre">50</span></tt>.</li>
<li><strong>orderby</strong> &#8211; List of fieldnames. Fieldnames can be prefixed by <tt class="docutils literal"><span class="pre">'-'</span></tt> for
descending ordering.  Order the result by these fields. For
example, if <tt class="docutils literal"><span class="pre">Meta.resultfields</span></tt> contains the short_name and
long_name fields, we can order our results by ascending short_name
and descending long_name as this: <tt class="docutils literal"><span class="pre">orderby=('short_name',</span>
<span class="pre">'-long_name')</span></tt>.  This defaults to <tt class="docutils literal"><span class="pre">cls._meta.ordering</span></tt> (see
<a class="reference internal" href="#devilry.simplified.simplified_modelapi" title="devilry.simplified.simplified_modelapi"><tt class="xref py py-func docutils literal"><span class="pre">devilry.simplified.simplified_modelapi()</span></tt></a>).</li>
<li><strong>result_fieldgroups</strong> &#8211; Adds additional fields to the result. Available values are the
fieldgroups in <tt class="docutils literal"><span class="pre">Meta.resultfields.additional_fieldgroups</span></tt>.</li>
<li><strong>search_fieldgroups</strong> &#8211; Adds additional fields which are searched for the <tt class="docutils literal"><span class="pre">query</span></tt> string.
Available values are the fieldgroups in
<tt class="docutils literal"><span class="pre">Meta.searchfields.additional_fieldgroups</span></tt>.</li>
<li><strong>filters</strong> &#8211; List of filters that can be parsed by <tt class="xref py py-meth docutils literal"><span class="pre">devilry.simplified.FilterSpec.parse()</span></tt>.</li>
<li><strong>exact_number_of_results</strong> &#8211; Expect this exact number of results. If unspecified (<tt class="xref docutils literal"><span class="pre">None</span></tt>),
this check is not performed. If the check fails,
<a class="reference internal" href="#devilry.simplified.InvalidNumberOfResults" title="devilry.simplified.InvalidNumberOfResults"><tt class="xref py py-exc docutils literal"><span class="pre">devilry.simplified.InvalidNumberOfResults</span></tt></a> is raised.</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The result of the search.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">QryResultWrapper</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="devilry.simplified.SimplifiedModelApi.update">
<em class="property">classmethod </em><tt class="descname">update</tt><big>(</big><em>user</em>, <em>pk</em>, <em>**field_values</em><big>)</big><a class="headerlink" href="#devilry.simplified.SimplifiedModelApi.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the given object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>user</strong> &#8211; Django user object.</li>
<li><strong>pk</strong> &#8211; Id of object or kwargs to the get method of the configured model.</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Param :</th><td class="field-body"><p class="first">field_values: The values to set on the given object.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The primary key of the updated object.</p>
</td>
</tr>
<tr class="field"><th class="field-name" colspan="2">Throws PermissionDenied:</th></tr>
<tr><td>&nbsp;</td><td class="field-body"><p class="first last">If the given user does not have permission to edit this object,
if the object does not exist, or if any of the <tt class="docutils literal"><span class="pre">field_values</span></tt>
is not in <tt class="docutils literal"><span class="pre">cls._meta.editablefields</span></tt>.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="devilry.simplified.SimplifiedModelApi.write_authorize">
<em class="property">classmethod </em><tt class="descname">write_authorize</tt><big>(</big><em>user</em>, <em>obj</em><big>)</big><a class="headerlink" href="#devilry.simplified.SimplifiedModelApi.write_authorize" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the given user has write (update/create) permission on the given obj.</p>
<p>Defaults to raising :exc:NotImplementedError</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name" colspan="2">Raises PermissionDenied:</th></tr>
<tr><td>&nbsp;</td><td class="field-body">If the given user do not have write permission on the given obj.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="devilry.simplified.FilterSpecs">
<em class="property">class </em><tt class="descclassname">devilry.simplified.</tt><tt class="descname">FilterSpecs</tt><big>(</big><em>*filterspecs_and_foreignkeyfilterspecs</em><big>)</big><a class="headerlink" href="#devilry.simplified.FilterSpecs" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Container of <a class="reference internal" href="#devilry.simplified.FilterSpec" title="devilry.simplified.FilterSpec"><tt class="xref py py-class docutils literal"><span class="pre">FilterSpec</span></tt></a> and <a class="reference internal" href="#devilry.simplified.ForeignFilterSpec" title="devilry.simplified.ForeignFilterSpec"><tt class="xref py py-class docutils literal"><span class="pre">ForeignFilterSpec</span></tt></a>.</p>
<dl class="method">
<dt id="devilry.simplified.FilterSpecs.iterfieldnames">
<tt class="descname">iterfieldnames</tt><big>(</big><big>)</big><a class="headerlink" href="#devilry.simplified.FilterSpecs.iterfieldnames" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over all fieldnames in this FilterSpecs. Used in
&#64;simplified_modelapi to validate the fields in this FilterSpecs. Note
that PatternFilterSpec are not validated.</p>
</dd></dl>

<dl class="method">
<dt id="devilry.simplified.FilterSpecs.parse">
<tt class="descname">parse</tt><big>(</big><em>filters</em><big>)</big><a class="headerlink" href="#devilry.simplified.FilterSpecs.parse" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate the given filters and translate them into a Django query.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>filters</strong> &#8211; <p>A list of filters on the following format:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[{</span><span class="s">&#39;field&#39;</span><span class="p">:</span> <span class="s">&#39;myfieldname&#39;</span><span class="p">,</span> <span class="s">&#39;comp&#39;</span><span class="p">:</span> <span class="s">&#39;&gt;&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="mi">30</span><span class="p">},</span>
 <span class="p">{</span><span class="s">&#39;field&#39;</span><span class="p">:</span> <span class="s">&#39;myotherfieldname&#39;</span><span class="p">,</span> <span class="s">&#39;comp&#39;</span><span class="p">:</span> <span class="s">&#39;=&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="s">&#39;myname&#39;</span><span class="p">}]</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field"><th class="field-name" colspan="2">Throws FilterValidationError:</th></tr>
<tr><td>&nbsp;</td><td class="field-body">If any of the <tt class="docutils literal"><span class="pre">filters</span></tt> are not in the
filterspecs.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="devilry.simplified.FilterSpec">
<em class="property">class </em><tt class="descclassname">devilry.simplified.</tt><tt class="descname">FilterSpec</tt><big>(</big><em>fieldname</em>, <em>supported_comp=('exact'</em>, <em>'iexact'</em>, <em>'&lt;'</em>, <em>'&gt;'</em>, <em>'&lt;='</em>, <em>'=&gt;'</em>, <em>'contains'</em>, <em>'icontains'</em>, <em>'startswith'</em>, <em>'endswith')</em><big>)</big><a class="headerlink" href="#devilry.simplified.FilterSpec" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Specifies that a specific field can be filtered, and what <em>comp</em> it can
use.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>fieldname</strong> &#8211; The field to allow filtering on.</li>
<li><strong>supported_comp</strong> &#8211; The allowed <em>comp</em> for this field.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="devilry.simplified.ForeignFilterSpec">
<em class="property">class </em><tt class="descclassname">devilry.simplified.</tt><tt class="descname">ForeignFilterSpec</tt><big>(</big><em>parentfield</em>, <em>*filterspecs</em><big>)</big><a class="headerlink" href="#devilry.simplified.ForeignFilterSpec" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Specify FilterSpec for foreign tables without having to type
<tt class="docutils literal"><span class="pre">__</span></tt> for each table. Instead of:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">FilterSpecs</span><span class="p">(</span><span class="n">FilterSpec</span><span class="p">(</span><span class="s">&#39;parentnode__parentnode__short_name&#39;</span><span class="p">),</span>
            <span class="n">FilterSpec</span><span class="p">(</span><span class="s">&#39;parentnode__parentnode__longname&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>We can do:</p>
<div class="highlight-python"><pre>FilterSpecs(ForeignFilterSpec('parentnode__parentnode',
                              FilterSpec('short_name'),
                              FilterSpec('long_name'))</pre>
</div>
</dd></dl>

<dl class="class">
<dt id="devilry.simplified.PatternFilterSpec">
<em class="property">class </em><tt class="descclassname">devilry.simplified.</tt><tt class="descname">PatternFilterSpec</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#devilry.simplified.PatternFilterSpec" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">devilry.simplified.filterspec.FilterSpec</span></tt></p>
<p>Pattern based field spec.</p>
<p><strong>NOTE</strong>: Should only be used when _really_ required, since it is less
secure and slows down filter validation (which is done on each search()).</p>
</dd></dl>

<div class="section" id="module-devilry.simplified.utils">
<span id="utils"></span><h3>utils<a class="headerlink" href="#module-devilry.simplified.utils" title="Permalink to this headline">¶</a></h3>
<p>General purpose utilities used by the simplified API. If any functions here
proves useful outside this module, they should me moved to <tt class="docutils literal"><span class="pre">devilry.utils</span></tt>.</p>
<dl class="function">
<dt id="devilry.simplified.utils.modelinstance_to_dict">
<tt class="descclassname">devilry.simplified.utils.</tt><tt class="descname">modelinstance_to_dict</tt><big>(</big><em>instance</em>, <em>fieldnames</em><big>)</big><a class="reference internal" href="_modules/devilry/simplified/utils.html#modelinstance_to_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#devilry.simplified.utils.modelinstance_to_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the given django model instance into a dict where
each fieldname in <tt class="docutils literal"><span class="pre">fieldnames</span></tt> is a key.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>instance</strong> &#8211; A django model instance.</li>
<li><strong>fieldname</strong> &#8211; List of fieldname names. Can also be foreign keys, such as
<tt class="docutils literal"><span class="pre">parentnode__parentnode__short_name</span></tt>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Simplified API</a><ul>
<li><a class="reference internal" href="#what-is-it">What is it?</a></li>
<li><a class="reference internal" href="#what-is-it-not">What is it not?</a></li>
<li><a class="reference internal" href="#example">Example</a></li>
<li><a class="reference internal" href="#public-api">Public API</a><ul>
<li><a class="reference internal" href="#module-devilry.simplified.utils">utils</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="plugins.html"
                        title="previous chapter">How to write a plugin</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="restful.html"
                        title="next chapter">Low level RESTful web service API</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/simplified.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="restful.html" title="Low level RESTful web service API"
             >next</a> |</li>
        <li class="right" >
          <a href="plugins.html" title="How to write a plugin"
             >previous</a> |</li>
        <li><a href="index.html">Devilry v1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, The Devilry Team.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>