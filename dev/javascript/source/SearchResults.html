<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js"><span id='devilry-extjshelpers-searchwidget-SearchResults'>/** A grid containing search results.
</span> *
 * @xtype searchresults
 * */
Ext.define('devilry.extjshelpers.searchwidget.SearchResults', {
    extend: 'Ext.grid.Panel',
    alias: 'widget.searchresults',
    config: {
<span id='devilry-extjshelpers-searchwidget-SearchResults-cfg-editorurlprefix'>        /**
</span>         * @cfg
         * Editor url prefix (__Required__). The editor url for a specific
         * item is ``editorurlprefix+id``. Note that this means that editorurlprefix _must_
         * end with ``/``.
         */
        editorurlprefix: ''
    },

    initComponent: function() {
        Ext.apply(this, {
            width: 570,
            margin: {
                top: 20
            },
            //height: 150,
            frame: false,
            //title: false,
            hideHeaders: true,
            columns: [{
                header: 'Items', dataIndex: 'id', flex: 1,
                renderer: this.formatRowWrapper
            }],
            dockedItems: [{
                xtype: 'pagingtoolbar',
                store: this.store,   // same store GridPanel is using
                dock: 'top',
                displayInfo: true
            }]
        });
        this.callParent(arguments);
    },

    formatRowWrapper: function(value, p, record) {
        return this.formatRow(record);
    },

    formatRow: function(record) {
        var datatpl = Ext.create('Ext.XTemplate', this.rowformattpl);
        var dataview = datatpl.apply(record.data);
        var tpl = Ext.create('Ext.XTemplate', 
            '&lt;div class=&quot;searchresults-row&quot;&gt;' +
            '   &lt;div class=&quot;links&quot;&gt;&lt;tpl for=&quot;links&quot;&gt;' +
            '       &lt;a class=&quot;{cssclass}&quot; href=&quot;{urlprefix}{parent.record.data.id}&quot;&gt;{title}&lt;/a&gt;' +
            '   &lt;/tpl&gt;&lt;/div&gt;' +
            '   &lt;div&gt;{dataview}&lt;/div&gt;' +
            '&lt;/div&gt;');
        return tpl.apply({
            dataview: dataview,
            links: this.links,
            record: record
        });
    },

    listeners: {
        //selectionchange: function(view, selections, options) {
            //var record = selections[0].data;
            //window.location = Ext.String.format('{0}{1}',  this.editorurlprefix, record.id);
        //}
    },

    deselectAll: function() {
        Ext.each(this.ownerCt.items.items, function(grid, index, resultgrids) {
            grid.getSelectionModel().deselectAll();
        });
    }
});
</pre>
</body>
</html>
