<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js"><span id='devilry-administrator-period-PrettyView'>/** PrettyView for an period. */
</span>Ext.define('devilry.administrator.period.PrettyView', {
    extend: 'devilry.administrator.PrettyView',
    alias: 'widget.administrator_periodprettyview',

    bodyTpl: Ext.create('Ext.XTemplate',
        '&lt;div class=&quot;section&quot;&gt;',
        '   &lt;tpl if=&quot;is_old&quot;&gt;',
        '       &lt;div class=&quot;section warning&quot;&gt;',
        '           &lt;h1&gt;Expired period&lt;/h1&gt;',
        '           &lt;p&gt;',
        '               This period was active from &lt;strong&gt;{start_time:date}&lt;/strong&gt; to ',
        '               &lt;strong&gt;{end_time:date}&lt;/strong&gt;. Examiners do not have ',
        '               access to any data related to the period, including the ',
        '               feedback they have given to students. ',
        '               Students can still view all their deliveries and feedback.',
        '           &lt;/p&gt;',
        '       &lt;/div&gt;',
        '   &lt;/tpl&gt;',
        '   &lt;tpl if=&quot;starttime_in_future&quot;&gt;',
        '       &lt;div class=&quot;section warning&quot;&gt;',
        '           &lt;h1&gt;In the future&lt;/h1&gt;',
        '           &lt;p&gt;',
        '               This period has not yet started. Students and examiners ',
        '               can not access the period until its &lt;strong&gt;start time&lt;/strong&gt;, which is ',
        '               &lt;strong&gt;{start_time:date}&lt;/strong&gt;',
        '           &lt;/p&gt;',
        '       &lt;/div&gt;',
        '   &lt;/tpl&gt;',
        '   &lt;tpl if=&quot;is_active&quot;&gt;',
        '       &lt;div class=&quot;section ok&quot;&gt;',
        '           &lt;h1&gt;Active&lt;/h1&gt;',
        '           &lt;p&gt;',
        '               This period is currently active. It started &lt;strong&gt;{start_time:date}&lt;/strong&gt; ',
        '               and it expires &lt;strong&gt;{end_time:date}&lt;/strong&gt;. When the period expires, examiners ',
        '               will not have access to any data related to the period, including the ',
        '               feedback they have given to students.',
        '           &lt;/p&gt;',
        '       &lt;/div&gt;',
        '   &lt;/tpl&gt;',
        '&lt;/div&gt;'
    ),

    getExtraBodyData: function(record) {
        var is_old = record.data.end_time &lt; Ext.Date.now();
        var starttime_in_future = record.data.start_time &gt; Ext.Date.now();
        return {
            is_old: is_old,
            starttime_in_future: starttime_in_future,
            is_active: (!is_old &amp;&amp; !starttime_in_future)
        };
    }
});
</pre>
</body>
</html>
